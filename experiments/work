#!/usr/bin/env ruby

fp = "
Пароль: 0308
Спишется 395,97р.
Перевод на счет 41001000000000
"

def parse_str(str)
 / (?<code>\d{1,4}$)/ =~ str
 / (?<num>\d{14})/ =~ str
 /(?<cost>\d{1,10},\d{0,2})р./ =~ str

 [code, num, cost.gsub(",", ".").to_f]
end

p parse_str(fp)